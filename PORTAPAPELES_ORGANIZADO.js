🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
[class*=""]
🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
var exp=document.querySelectorAll('')[0].textContent.trim(); exp;
🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
var ver=



// ver.jobs[0];  ver.jobs[0].url; // EXTRACT
//ver.job;      ver.job.html;   ver.job.jobdesc // JOBDESC
🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
[class=""]:not( [style=""])
🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
//ARROW FUNCTION


(()=>{
    var out1={}
      out1.has_next_page=false;                                          
    return out1;
})()
🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
script[type="application/ld+json"]
🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
👌👌👌👌👌INDEXAR👌👌👌👌👌

🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
https://talentcom-my.sharepoint.com/:x:/r/personal/daniel_hazanow_talent_com/_layouts/15/Doc.aspx?sourcedoc=%7B8D4B28DB-0880-4342-8034-868CF1B9E899%7D&file=Team%209%20V2.xlsx&action=default&mobileredirect=true&cid=ab7b5166-f3b7-4094-8f30-70f713eca5df
🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
C:\Users\USUARIO\Desktop\RESUMEN VISUAL\Estructuras_de_pagina\
🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
http://qa.neuvoo.com/service/is-indexed.php?debug=1&u=pandologic-
🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
http://index02.neuvoo.com/dash/class/portfolios/async.php?action=get-scanids-by-jobsiteurl-fragment&debug=1&fragment=

🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
👽👽👽👽👽 LINKS 👽👽👽👽👽
🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
//EXTRAER VARIABLES


//*/ // jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj
// VARIABLE X
let job={} //poner esto si se va a probar en consola

let var1; let aux1 = Array.from(document.querySelectorAll('li')).filter(x => x.textContent.search(/BENEFIT|benefit|Benefit/gmi) > -1);
//aux1[0]!=null ? var1=aux1[0].textContent.trim() : var1='';
aux1[0]!=null ? var1=aux1[0].nextElementSibling.textContent.trim() : var1='';
//*/ // jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj

//JOBTYPE
let job={} //poner esto si se va a probar en consola

let auxjobtype = Array.from(document.querySelectorAll('li')).filter(x => x.textContent.search(/JOBTYPE|jobtype|job type|Job Type/gmi) > -1);
//auxjobtype[0]!=null ? job.source_jobtype=auxjobtype[0].textContent.trim() : job.source_jobtype='';
auxjobtype[0]!=null ? job.source_jobtype=auxjobtype[0].nextElementSibling.textContent.trim() : job.source_jobtype='';

//*/ // jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj

// SALARY
let job={} //poner esto si se va a probar en consola

    let auxsalary = Array.from(document.querySelectorAll('tbody tr td')).filter(x => x.textContent.search(/\$|salary|SALARY|Salary/gmi) > -1);
    auxsalary[0]!=null ? job.source_salary=auxsalary[0].textContent.trim() : job.source_salary='';
    
//*/ // jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj

// DATEPOSTED_RAW (Format Date)
let job={} //poner esto si se va a probar en consola

const formatDate = (value) => {
    let date = new Date(value);
    const withCero = n => n < 10 ? `0${n}` : n;
    return `${withCero(date.getMonth()+1)}/${withCero(date.getDate())}/${date.getFullYear()}`;
  }

    let auxdate = Array.from(document.querySelectorAll('div.spanpanel1')).filter(x => x.textContent.search(/Dateposted|DATEPOSTED|dateposted|date posted|Date Posted/gmi) > -1);
    auxdate[0]!=null ? job.dateposted_raw=formatDate(auxdate[0].nextElementSibling.textContent.trim()) : job.dateposted_raw='';

//*/ // jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj
// DATEPOSTED_RAW (SPLITEADA)
let job={} //poner esto si se va a probar en consola

let datess; let auxdate = Array.from(document.querySelectorAll('div.spanpanel1')).filter(x => x.textContent.search(/Dateposted|DATEPOSTED|dateposted|date posted|Date Posted/gmi) > -1);
auxdate[0]!=null ? datess=auxdate[0].nextElementSibling.textContent.trim() : datess='No';
if(datess!='No')datess=datess.split('');
job.dateposted_raw= datess[]+"/"+datess[]+"/"+datess[];

//*/ // jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj
// EXPERIENCE CON GUION

let job={} //poner esto si se va a probar en consola

const auxExperience = [...document.querySelectorAll('p')].find(e => e?.textContent.match(/\(?\d{1,2}\)?\s?\+?\s?(\s?(-|to|–)\s?\d{1,2}\+?)?\syears?/gi));
if (auxExperience) {
    job.experience_required = auxExperience.textContent.match(/\(?\d{1,2}\)?\s?\+?\s?(\s?(-|to|–)\s?\d{1,2}\+?)?\syears?/gi)[0];
}
//*/ // jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj

//EXPERIENCE REQUIRED BASICO

let job={} //poner esto si se va a probar en consola

let auxexperience = Array.from(document.querySelectorAll('li')).filter(x => x.textContent.search(/years/gmi) > -1);
auxexperience[0]!=null ? job.experience_required=auxexperience[0].textContent.trim() : job.experience_required='';
//aux[0]!=null ? job.experience_required=aux[0].textContent.trim().match(/\d-\d\s|\d\s|(\d)|years/ig)?.join('') : job.experience_required='';
    
//*/ // jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj

//BENEFIT
let job={} //poner esto si se va a probar en consola

let auxbenefit = Array.from(document.querySelectorAll('li')).filter(x => x.textContent.search(/BENEFIT|benefit|Benefit/gmi) > -1);
//auxbenefit[0]!=null ? job.source_benefit=auxbenefit[0].textContent.trim() : job.source_benefit='';
auxbenefit[0]!=null ? job.source_benefit=auxbenefit[0].nextElementSibling.textContent.trim() : job.source_benefit='';

//*/ // jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj
🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
//MULTIPLES VARIABLES2 (SENCILLO)


job.dateposted_raw=multiplesVariables2(/Dateposted|DATEPOSTED|dateposted|date posted|Date Posted/gmi,'li',document)
job.dateclosed_raw=multiplesVariables2(/Dateposted|DATEPOSTED|dateposted|date posted|Date Posted/gmi,'li',document)
job.source_salary=multiplesVariables2(/\$|salary|SALARY|Salary/gmi,'li',document)
job.source_jobtype=multiplesVariables2(/JOBTYPE|jobtype|job type|Job Type/gmi,'li',document)
job.source_benefit=multiplesVariables2(/BENEFIT|benefit|Benefit/gmi,'li',document)



function multiplesVariables(expReg,selector,contenedor,next){
    var resultado
    let aux = Array.from(contenedor.querySelectorAll(selector)).filter(x => x.textContent.search(expReg) > -1);
    if(next){
    aux[0]!=null ? resultado=aux[0].nextElementSibling.textContent.replace(/([\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g, '').trim() : resultado=undefined;
    return resultado;
    }else{
    aux[0]!=null ? resultado=aux[0].textContent.replace(/([\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g, '').trim() : resultado=undefined;
    return resultado;
    }
}
🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
//MULTIPLES VARIABLES1 (DOBLE VALIDACION)


job.experience_required=multiplesVariables(/\(?\d{1,2}\)?\s?\+?\s?(\s?(-|to|–)\s?\d{1,2}\+?)?\syears?/gi, 'li',document)
job.experience_required=multiplesVariables(/\(?\d{1,2}\)?\s?\+?\s?(\s?(-|to|–)\s?\d{1,2}\+?)?\smonths?/gi, 'li',document)


function multiplesVariables(expReg,selector, contenedor) {
    var  resultado;
    const aux = [...contenedor.querySelectorAll(selector)].find(e => e?.textContent.match(expReg));
    aux?resultado = aux.textContent.match(expReg)[0] :resultado='No encontrado';
  return resultado;
}
🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
// NUEVAS FORMAS_VARIABLES


//BENEFIT DESDE EL JOB.JOBDESC                           
let inicioBenefit=''; let finBenefit='';
if((job.jobdesc.search(inicioBenefit)>-1) && (job.jobdesc.search(finBenefit)>-1))job.source_benefit=job.jobdesc.split(inicioBenefit).pop().split(finBenefit).shift().trim(); 
// jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj

// EXPERIENCE CON EXPERIENCE &&  YEAR SENCILLA
let job={}; 

const auxExperience = [...document.querySelectorAll('li')].find(e => (e?.textContent.match(/experience/gi))&&(e?.textContent.match(/year/gi)));
if (auxExperience) {
    job.experience_required = auxExperience.textContent.match(/\d-\d\s|\d\s|(\d)|years/ig)?.join('');
}

// jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj

// EXPERIENCE CON EXPERIENCE &&  YEAR .MATH Y REPLACE
let job={}; 

const auxExperience = [...document.querySelectorAll('li')].find(e => (e?.textContent.match(/experience/gi))&&(e?.textContent.match(/year/gi)));
if (auxExperience) {
    job.experience_required = auxExperience.textContent.replaceAll('-',' ').match(/\(?\d{1,2}\)?\s?\+?\s?(\s?(-|to|–)\s?\d{1,2}\+?)?\syears?/gi)[0];
}

// jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj

// VARIABLE EN INNER_HTML


    let varhtml; let auxhtml = Array.from(document.querySelectorAll('div.vacancies-list-cards> div p')[0].innerHTML.split('<br')).filter(x=> x.search(/Localização/gmi)>-1);
    //aux1[0]!=null ? var1=aux1[0].textContent.trim() : var1='';
    auxhtml[0]!=null ? varhtml=auxhtml[0].split('</strong>').pop().replaceAll('\n','').trim() : varhtml='';
  //*/ // jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj

let job={};
//EXPERIENCE QUE TOMA MESES EN VARIOS IDIOMAS             
let experience=[];  for (let li of document.querySelectorAll("li")) {
    if (/years|year|month|Months|anni|ans|mesi|jaar|maand|años|anno|jahre/i.test(li.textContent) && /experience|Experience|esperienza|expérience|werkervaring|experiencia|erfahrung/i.test(li.textContent)
      && /\d|one|two|three|four|five|six|seven|eight|nine|ten/gi.test(li.textContent))
      experience.push(li.textContent);
  }
  job.experience_required=experience[0];
//*/ // jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj
🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳

🐳🐳🐳🐳🐳 VARIABLES 🐳🐳🐳🐳  

🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
    // FETCH EXTRAC BASICO


    (async () => {
        let out = {};
        // out["pass_it"] = pass_it;
        var jobsSelector = ``
        try {
        let jobs = [];
        const url = window.location.href
        const resp = await fetch(url, {
        "headers": {}
        });
        const data = await resp.text();
        var doc = document.createElement('div');
        doc.innerHTML = data;
        var htmlJobs = doc.querySelectorAll(jobsSelector);
        htmlJobs.forEach((elem) => {
        var job = {};
        //elem.querySelector(``).textContent.trim()
        job.title = elem.querySelector('').textContent.trim();
        job.url = elem.querySelector('').href.trim();
        job.reqid = elem.querySelector('').href.trim();
        job.source_location = elem.querySelector('').textContent.trim();
        job.location = job.source_location;
        job.dateposted_raw = elem.querySelector('').textContent.trim();
        job.dateclosed_raw = elem.querySelector('').textContent.trim();
        job.source_jobtype = elem.querySelector('').textContent.trim();
        job.source_salary = elem.querySelector('').textContent.trim();
        job.experience_required = elem.querySelector('').textContent.trim();
        job.source_benefit=elem.querySelector('').textContent.trim();
        job.source_benefit=elem.querySelector('').textContent.trim();
        job.source_empname = elem.querySelector('').textContent.trim();

        job.temp=4545;

        jobs.push(job);
        })
        out["jobs"] = jobs;
        return out;
        } catch (err) {
        console.log(err)
        }
        })();

🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
    //FETCH JOBDATA -sin decoder
    

    (async () => {
        let out = {};
        var job = {};
        var selector = ``;
        var remove_selectors = ['a', 'script', 'i', 'img', 'style', 'button', 'figure', 'noscript', 'svg', 'form', 'input', 'iframe', 'link'];
        try {
            const url = window.location.href
            const resp = await fetch(url, {
                "headers": {
                    "accept": "*/*"
                }
            });
            const data = await resp.text();
            const parseDoc = new DOMParser();
            const doc = parseDoc.parseFromString(data, 'text/html');
            if (!!doc.querySelector(selector)) {
            var full_html = doc.querySelector(selector);
            //if (full_html) {
                // remove something from the jobdatata
                if (remove_selectors.length > 0) remove_selectors.forEach(remove_selector => {
                    if (full_html.querySelector(remove_selector)) full_html.querySelector(remove_selector).remove();
                });
                if (typeof cleanHTML == "undefined") cleanHTML = function(x) {
                    return x
                };
                if (typeof msg == "undefined") msg = console.log;
                job.html = full_html.innerHTML.trim();
                //limpieza de las descripciones
                //job.html = removeTextBefore(job.html, ``, false);
                //job.html = removeTextAfter(job.html, ``, true);
                //job.html = removeTextAfter(job.html, ``, true);
                //job.html = removeTextAfter(job.html, ``, true);
                job.html = cleanHTML(job.html);
                var tmp = document.createElement('div');
                tmp.innerHTML = job.html;
                job.jobdesc = tmp.textContent.trim();
                job.jobdesc = cleanHTML(job.jobdesc);
                
 
            }else
                  {
                  job.flag_active = 0; job.html=""; job.jobdesc ='';
                  }
        } catch (err) {
            console.log(err)
        }
        out["job"] = job;
        console.table(job)
        return out;
      })();
      function removeTextBefore(html, text, flag) {
        var newHtml = html;
        if (newHtml.indexOf(text) > -1) {
            newHtml = newHtml.split(text).pop();
            if (!flag) {
                newHtml = "<h3>" + text + "</h3>" + newHtml;
            }
        }
        return newHtml;
      }
      function removeTextAfter(html, text, flag) {
        var newHtml = html;
        if (newHtml.indexOf(text) > -1) {
            newHtml = newHtml.split(text).shift();
            if (!flag) {
                newHtml = newHtml + "<p>" + text + "</p>";
            }
        }
        return newHtml;
      }

🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
// DOBLE fetch 


      //Extract
        (async () => {
            const out = {};
            const jobs = [];
            out.pass_it=pass_it;
                const url = window.location.href
                const resp = await fetch(url, {
                "headers": {}
                });
            const html = await resp.text();
            const div = document.createElement("div");
            div.innerHTML = html;
            const html_jobs = div.querySelectorAll('div#pro-gallery-margin-container')[0].querySelectorAll('div[class="gallery-item-container visible hover-animation-fade-in"]');
            // out.pass_it.jobsPerPage=25;
            // out.pass_it.jobsInPage = html_jobs.length;
            // msg('jobsPerPage: '+out.pass_it.jobsPerPage+' jobsInPage'+out.pass_it.jobsInPage);
            for (let x in html_jobs) {
                if (typeof html_jobs[x] == "function") continue;
                if (typeof html_jobs[x] == "number") continue;
                let job = {};
                let elem = html_jobs[x];
                //////EXTRACTING VARIABLES///////
                job.title = elem.querySelector('a[class]').textContent.trim();
                job.url = elem.querySelector('a[class]').href.trim();
        
        
                job.temp = 1;
                
        //     ████████████████████████████████ DESCRIPCION ████████████████████████████████████  /*
        
                  var selector = `selector de la descripcion`;
                  var remove_selectors = ['a', 'script', 'i', 'img', 'style', 'button', 'figure', 'noscript', 'svg', 'form', 'input', 'iframe', 'link'];
                  const resp2 = await fetch(job.url, {
                        "headers": {
                            "accept": "*/*"
                        }
                });
                  const data = await resp2.text();
                  const parseDoc = new DOMParser();
                  const doc = parseDoc.parseFromString(data, 'text/html')
                  var full_html = doc.querySelector(selector);
                  if (full_html) {
                      // remove something from the jobdatata
                      if (remove_selectors.length > 0) remove_selectors.forEach(remove_selector => {
                          if (full_html.querySelector(remove_selector)) full_html.querySelector(remove_selector).remove();
                      });
                      if (typeof cleanHTML == "undefined") cleanHTML = function(x) {
                          return x
                      };
                      if (typeof msg == "undefined") msg = console.log;
                      job.html = full_html.innerHTML.trim();
                      //limpieza de las descripciones
                      //job.html = removeTextBefore(job.html, ``, false);
                      //job.html = removeTextAfter(job.html, ``, true);
                      //job.html = removeTextAfter(job.html, ``, true);
                      //job.html = removeTextAfter(job.html, ``, true);
                      job.html = cleanHTML(job.html);
                      var tmp = document.createElement('div');
                      tmp.innerHTML = job.html;
                      job.jobdesc = tmp.textContent.trim();
                      job.jobdesc = cleanHTML(job.jobdesc);
                  }
        
        //*/// ████████████████████████████████████████████████████████████████████
        
                job.temp = 1;
                jobs.push(job);
            }
            //out.pass_it.counter +=1;
            out.jobs = jobs;
            return out;
        })();
        
        
            function removeTextBefore(html, text, flag) {
              var newHtml = html;
              if (newHtml.indexOf(text) > -1) {
                  newHtml = newHtml.split(text).pop();
                  if (!flag) {
                      newHtml = "<h3>" + text + "</h3>" + newHtml;
                  }
              }
              return newHtml;
            }
            function removeTextAfter(html, text, flag) {
              var newHtml = html;
              if (newHtml.indexOf(text) > -1) {
                  newHtml = newHtml.split(text).shift();
                  if (!flag) {
                      newHtml = newHtml + "<p>" + text + "</p>";
                  }
              }
              return newHtml;
            }


🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
//JSON FETCH BASICA


//fetch limpia 
(async () => {
    let out = {};
     out["pass_it"] = pass_it;
    if (typeof cleanHTML == "undefined") cleanHTML = function(x) {
        return x
    };
    if (typeof msg == "undefined") msg = console.log;
    try {
        let jobs = [];
        const resp = await fetch("https://apiteams.goobee.com.br/api/publicavaga"+out.pass_it.counter+"/vagas/SITE_CADMUS", {
            "credentials": "omit",
            "headers": {
                "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:104.0) Gecko/20100101 Firefox/104.0",
                "Accept": "application/json, text/javascript, */*; q=0.01",
                "Accept-Language": "es-ES,es;q=0.8,en-US;q=0.5,en;q=0.3",
                "Content-Type": "application/json",
                "Sec-Fetch-Dest": "empty",
                "Sec-Fetch-Mode": "cors",
                "Sec-Fetch-Site": "cross-site"
            },
            "referrer": "https://cadmus.com.br/",
            "method": "GET",
            "mode": "cors"
        });
        const data = await resp.json();
        out.pass_it.jobsPerPage=20;
        out.pass_it.jobsInPage = contenedor.length;
        msg('jobsPerPage: '+out.pass_it.jobsPerPage+' jobsInPage'+out.pass_it.jobsInPage);
        for(let x = 0 ; x < data.contenedor.length ; x++){ //poner el contenedor de  los jobs
            let elem = data.contenedor[x];  //poner tambien el contenedor de los jobs
            let job = {};
 
            job.title = elem.     ;
            job.url = elem.     ;
            job.reqid = elem.     ;
            job.source_location = elem.     ;
            job.location = job.source_location;
            job.dateposted_raw = elem.     ;
            job.dateclosed_raw = elem.     ;
            job.source_jobtype = elem.     ;
            job.source_salary = elem.     ;
            job.experience_required = elem.     ;
            job.source_benefit=elem.     ;
            job.source_empname = elem.     ;

            job.temp = 44545;
            jobs.push(job)
        }
        //descomentar si se usará un html
        // const data = await resp.text();
        // const parseDoc = new DOMParser();
        // const doc = parseDoc.parseFromString(data, 'text/html')
        out["jobs"] = jobs;
        return out;
    } catch (err) {
        throw err;
    }
})();

🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
// jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj /*
//*/ // jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj

🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
//PASS_IT


//infinity
(() => {
    var out = {};
    out.pass_it = {
        "counter":0,
        "jobsPerPage":0,
        "jobsInPage":0
    }
    return out;
})()

//PAGINATION
(()=>{
    var out={};
    out.pass_it=pass_it;
    var { counter, jobsPerPage, jobsInPage } = out.pass_it;
    out.pass_it.counter+=jobsPerPage;
    out.has_next_page=jobsInPage==jobsPerPage?true:false;
    return out;
})()

         out.pass_it.jobsPerPage=20;
         out.pass_it.jobsInPage = contenedor.length;
         msg('jobsPerPage: '+out.pass_it.jobsPerPage+' jobsInPage'+out.pass_it.jobsInPage);

🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
//cuando el date viene con meses y desordenado


let var2=''; let aux2 = Array.from(document.querySelectorAll('div.joblayouttoken.displayDTM')).filter(x => x.textContent.search(/Posted Date/gmi) > -1);
//aux1[0]!=null ? var1=aux1[0].textContent.trim() : var1='';
aux2[0]!=null ? var2=aux1[0].textContent.replace('Posted Date','').trim() : var2='';

  if(var2 != ""){
    datePosted = var1.split("Date").pop().trim();
    job.dateposted_raw = getDateFormat(datePosted," ",1,0,2);
  }else{
    job.dateposted_raw = undefined;
  }


  function getDateFormat(dateRaw, cut, dayPosition, monthPosition, yearPosition) {
    dateRaw = dateRaw.replace(/\,/g,"").replace(/st|th|nd|rd/gi,'').trim();
  
    let day   =  dateRaw.split(cut)[dayPosition].trim(), 
        month =  dateRaw.split(cut)[monthPosition].trim(), 
        year  = dateRaw.split(cut)[yearPosition].trim();
  
    if (day < 10 && day.length < 2) {day = "0" + day;}
  
    if(dateRaw.search(/[a-z]/gi)>-1){ 
      if(month.search(/jan/i)>-1){month = "01";}
      if(month.search(/feb|fév/i)>-1){month = "02";}
      if(month.search(/mar|mär/i)>-1){month = "03";}
      if(month.search(/apr|avr/i)>-1){month = "04";}
      if(month.search(/may|mai/i)>-1){month = "05";}
      if(month.search(/jun|juin/i)>-1){month = "06";}
      if(month.search(/jul|juil/i)>-1){month = "07";}
      if(month.search(/aug|août/i)>-1){month = "08";}
      if(month.search(/sep/i)>-1){month = "09";}
      if(month.search(/oct|okt/i)>-1){month = "10";}
      if(month.search(/nov/i)>-1){month = "11";}
      if(month.search(/dec|dez/i)>-1){month = "12";}
    }
  
    if (year < 100 && year.length < 3) {year = "20" + year;}
  
    var datum = month +"/"+  day +"/"+ year;
  
    return datum;
  }

  // JJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJ
  🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
//ESPERAS


(function() {
    var out = {};
    out.waitFor = '';
  //   msg("Esperando 3 segundos..............");              Y
  //   out.wait = 3000;
  //   out["html"] = true;
  //   out["pic"] = true;

 // out.iframeSelector = "iframe#pcrframe";
 // out.iframeWaitFor = "div#jdesc";

    return out;
})();

🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
// FORMAT DATE


const formatDate = (value) => {
    let date = new Date(value);
    const withCero = n => n < 10 ? `0${n}` : n;
    return `${withCero(date.getMonth()+1)}/${withCero(date.getDate())}/${date.getFullYear()}`;
  }
  // JJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJ
🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
//     ████████████████████████████████████████████████████████████████████  /*     
//*/// ████████████████████████████████████████████████████████████████████
🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
//JOBDESCRIPTION BASICO


(function() {
    var out = {};
    var job = {};
    var selector = '';
    var selectorError="";
    var full_html;
    if(document?.querySelector(selector)){varfull_html = document.querySelector(selector);} else{
        full_html=document?.querySelector(selectorError);
    }

        //LIMPIAR DESCRIPCIONES
const remove_selectors = [
    'a',
    'i',
    'img',
    'svg',
    'link',
    'iframe',
    'form',
    'noscript',
    'figure',
    'video',
    'button',
    'input',
    'style',
    'javascript',
    'script',
];
    //var job = pass_it["job"];
    for (const a of full_html.querySelectorAll('a')) {
        a.remove(); //if you want to remove this selector
    }
    for (const a of full_html.querySelectorAll('script')) {
        a.remove(); //if you want to remove this selector
    }
    for (const a of full_html.querySelectorAll('style')) {
        a.remove(); //if you want to remove this selector
    }

    // remove something from the jobdatata
    if (remove_selectors.length > 0) remove_selectors.forEach(remove_selector => {
        if (full_html.querySelector(remove_selector)) full_html.querySelector(remove_selector).remove();
    });
    if (typeof cleanHTML == "undefined") cleanHTML = function(x) {
        return x
    };
    if (typeof msg == "undefined") msg = console.log;



    job.html = full_html.innerHTML.trim();

    // job.html = removeTextBefore(job.html, '', false);
    // job.html = removeTextBefore(job.html, '', false);
    // job.html = removeTextBefore(job.html, '', false);

    // job.html = removeTextAfter(job.html, '', true);
    // job.html = removeTextAfter(job.html, '', true);
    // job.html = removeTextAfter(job.html, '', true);

    if (typeof cleanHTML == "undefined") cleanHTML = function(x) {
        return x
    };
    if (typeof msg == "undefined") msg = console.log;
    
    //clean emogis
    job.html = job.html.replace(/([\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g, '').trim();
    if(job.html.indexOf('@')>-1){
        var eliminar = job.html?.replace(/\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+/gi,"");  } 
    if(eliminar)job.html=eliminar;
    
    
    if (job.html.indexOf('https') > -1) { job.html = job.html.replace(/(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \?=.-]*)*\/?/gi,""); }
    if (job.html.indexOf('http') > -1)  { job.html = job.html.replace(/(http?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \?=.-]*)*\/?/gi,"");  } 
    if (job.html.indexOf('HTTPS') > -1) { job.html = job.html.replace(/(HTTPS?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \?=.-]*)*\/?/gi,""); }
    if (job.html.indexOf('HTTP') > -1)  { job.html = job.html.replace(/(HTTP?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \?=.-]*)*\/?/gi,"");  }
    if (job.html.indexOf('www') > -1)  { job.html = job.html.replace(/(www?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \?=.-]*)*\/?/gi,"");  }

    job.html = cleanHTML(job.html);
    var tmp = document.createElement('div');
    tmp.innerHTML = job.html;
    job.jobdesc = tmp.textContent.trim();
    job.jobdesc = cleanHTML(job.jobdesc);
    out["job"] = job;
    return out;

})();

function removeTextBefore(html, text, flag) {
    var newHtml = html;
    if (newHtml.indexOf(text) > -1) {
        newHtml = newHtml.split(text).pop();
        if (!flag) {
            newHtml = "<h3>" + text + "</h3>" + newHtml;
        }
    }
    return newHtml;
}

function removeTextAfter(html, text, flag) {
    var newHtml = html;
    if (newHtml.indexOf(text) > -1) {
        newHtml = newHtml.split(text).shift();
        if (!flag) {
            newHtml = newHtml + "<p>" + text + "</p>";
        }
    }
    return newHtml;
}
🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
//EXTRACT BASICO


(function() {
    var out = {};
    var html_jobs = document.querySelectorAll('');
    var jobs = [];
    for (var x in html_jobs) {
        if (typeof html_jobs[x] == "function") continue;
        if (typeof html_jobs[x] == "number") continue;
        var job = {};
        var elem = html_jobs[x];


        job.title = elem.querySelector('').textContent.trim();
        job.url = elem.querySelector('').href.trim();
        job.reqid = elem.querySelector('').href.trim();
        job.source_location = elem.querySelector('').textContent.trim();
        job.location = job.source_location;
        job.dateposted_raw = elem.querySelector('').textContent.trim();
        job.dateclosed_raw = elem.querySelector('').textContent.trim();
        job.source_jobtype = elem.querySelector('').textContent.trim();
        job.source_salary = elem.querySelector('').textContent.trim();
        job.experience_required = elem.querySelector('').textContent.trim();
        job.source_benefit=elem.querySelector('').textContent.trim();
        job.source_benefit=elem.querySelector('').textContent.trim();
        job.source_empname = elem.querySelector('').textContent.trim();

        
        job.temp = 1;
        jobs.push(job);
    }

    out["jobs"] = jobs;
    return out;
})();




🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳
 //FETCH JOBDATA -sin decoder
    

    (async () => {
        let out = {};
        var job = {};
        var selector = ``;
        var remove_selectors = ['a', 'script', 'i', 'img', 'style', 'button', 'figure', 'noscript', 'svg', 'form', 'input', 'iframe', 'link'];
        try {
            const url = window.location.href
            const resp = await fetch(url, {
                "headers": {
                    "accept": "*/*"
                }
            });
            const data = await resp.text();
            const parseDoc = new DOMParser();
            const doc = parseDoc.parseFromString(data, 'text/html');
            if (!!doc.querySelector(selector)) {
            var full_html = doc.querySelector(selector);
            //if (full_html) {
                // remove something from the jobdatata
                if (remove_selectors.length > 0) remove_selectors.forEach(remove_selector => {
                    if (full_html.querySelector(remove_selector)) full_html.querySelector(remove_selector).remove();
                });
                if (typeof cleanHTML == "undefined") cleanHTML = function(x) {
                    return x
                };
                if (typeof msg == "undefined") msg = console.log;
                job.html = full_html.innerHTML.trim();
                //limpieza de las descripciones
                //job.html = removeTextBefore(job.html, ``, false);
                //job.html = removeTextAfter(job.html, ``, true);
                //job.html = removeTextAfter(job.html, ``, true);
                //job.html = removeTextAfter(job.html, ``, true);
                job.html = cleanHTML(job.html);
                var tmp = document.createElement('div');
                tmp.innerHTML = job.html;
                job.jobdesc = tmp.textContent.trim();
                job.jobdesc = cleanHTML(job.jobdesc);
                
 
            }else
                  {
                  job.flag_active = 0; job.html=""; job.jobdesc ='';
                  }
        } catch (err) {
            console.log(err)
        }
        out["job"] = job;
        console.table(job)
        return out;
      })();
      function removeTextBefore(html, text, flag) {
        var newHtml = html;
        if (newHtml.indexOf(text) > -1) {
            newHtml = newHtml.split(text).pop();
            if (!flag) {
                newHtml = "<h3>" + text + "</h3>" + newHtml;
            }
        }
        return newHtml;
      }
      function removeTextAfter(html, text, flag) {
        var newHtml = html;
        if (newHtml.indexOf(text) > -1) {
            newHtml = newHtml.split(text).shift();
            if (!flag) {
                newHtml = newHtml + "<p>" + text + "</p>";
            }
        }
        return newHtml;
      }
🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳

🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳

🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳

🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳

🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳

🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳

🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳

🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳

🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳

🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳🐳